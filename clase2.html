<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Fundamentos contenedores Docker - CFL 410</title>
		<!-- <link rel="icon" type="image/x-icon" href="/img/logos/IDEPInformaticaLogo.png"> -->
        <link rel="icon" type="image/x-icon" href="/img/logos/page.png">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
		<!-- Custom CSS -->
		<link rel="stylesheet" href="css/egg.css">
		
	</head>
	<body>

		<div class="reveal">
			<div class="slides">

            <section>

                <section id="inicio" data-state="customevent" data-transition="slide" data-background-gradient="radial-gradient(#ffffff, #dcffdc)" data-background-size="contain">
                    
                    <h3>Fundamentos y usos prácticos de Docker</h3>
                    <h4>Clase 2 : Conceptos básicos de imágenes Docker</h4>

                </section>

                <section id="index" data-state="no_footer">
                    <h3>Temas de clase 2</h3>
                    <h4>Conceptos básicos de imágenes Docker</h4>
                    <small>
                
                        <ul>
                            <li><a href="#/images_2">Qué es una imágen Docker</a></li>
                            <li><a href="#/images_registry">Qué es una registry</a></li>
                            <li><a href="#/images_tags">Tags de las imágenes</a></li>
                            <li><a href="#/docker3">Estados de un contenedor</a></li>
                            <li><a href="#/life_cycle">Ciclo de vida de contenedores</a></li>
                            <li><a href="#/docker_cli">Docker CLI: Comandos básicos</a></li>
                            <li><a href="#/labs_clase">Laboratorios</a></li>
                            

                        </ul>

                    </small>
                    
                </section>

            </section>
			

			<section>
				<section id="images_1" data-state="customevent" data-transition="slide" data-background-gradient="radial-gradient(#ffffff, #dcffdc)" data-background-size="contain">
					<h3>Conceptos básios de Docker:</h3>
                    <h4>Imágen, registry y contenedor</h4>
				</section>

				<section id="images_2" data-state="no_footer">
					<h3>¿Qué es una imágen Docker?</h3>
					
                    <small>
                    <p>Una imágen de Docker es una plantilla <strong>inmutable</strong> que contiene <em>todo lo necesario para ejecutar un contenedor</em>. Esto incluye el código de la aplicación, bibliotecas, dependencias, y el entorno de ejecución necesario. Las imágenes se crean a partir <strong>Dockerfiles</strong>, que son archivos de texto con instrucciones específicas para construir una imagen.</p>
                    <p>Las imágenes están disponibles en diferentes repositorios, tanto públicos como privados, siendo <a href="https://hub.docker.com/" target="_blank">DockerHub</a> la <strong>registry</strong> oficial y mas utilizada.</p>
                    <img src="img/clase2/diagram.png">
                    
                    
                    
                    </small>

				</section>

                

                <section id="images_registry" data-state="no_footer">
                    <h3>¿Qué es una registry?</h3>
                    <small>
                    <p>Un Docker Registry es un servicio que permite almacenar y distribuir imágenes de Docker. <a href="https://hub.docker.com/" target="_blank">Docker Hub</a> es el registro público más conocido, aunque no es el único disponible.</p>
                    <p>Los registros de Docker ofrecen un amplio catálogo de imágenes listas para descargar y la opción de subir nuestras propias imágenes, ya sea para compartirlas o utilizarlas posteriormente. Si preferimos mantener nuestras imágenes de forma privada, algunos registros pueden requerir suscripciones de pago.</p>
                    <p>Además, es posible configurar registros privados, lo que nos permite gestionar nuestras imágenes de Docker de manera segura dentro de nuestra organización.</p>
                    
                    </small>
                </section>

                <section id="images_docker_hub" data-state="no_footer">
					<h3>Registry: Dockerhub</h3>
                    <small>Una búsqueda "Linux" trae muchos resultados. Estando <a href="https://hub.docker.com/_/alpine" target="_blank">Alpine</a>, <a href="https://hub.docker.com/_/ubuntu" target="_blank">Ubuntu</a>,
                        <a href="https://hub.docker.com/_/debian" target="_blank">Debian</a> y <a href="https://hub.docker.com/_/rockylinux" target="_blank">RockyLinux</a> entre los mas populares.</small>

                    <!-- <div class="custom-container">
                        <div class="custom-text">
                            <small>
                            <p></p>
                            </small>

                        </div>

                        <div class="custom-image">
                            

                        </div>


                    </div> -->
					
                    <a href="https://hub.docker.com/search?q=linux&type=image" target="_blank"><img src="img/clase2/docker_hub1.png" width="80%"></a>


				</section>

                <section id="images_tags" data-state="no_footer">
                    <h3>Tags de las imágenes</h3>
                    <small>
                        Los tags en una imagen Docker son etiquetas que permiten identificar y versionar las imágenes. Cada tag se asocia a una versión específica de la imagen, 
                        lo que facilita la gestión y despliegue de diferentes versiones de una aplicación. Por ejemplo, podemos tener una imagen con el tag <strong>latest</strong> para la versión 
                        más reciente y otro tag como <strong>v1.0</strong> para una versión específica.
                    </small>
                    <p>

                    </p>
                    <small>
                    <p>Los tags se identifican con un ":" después del nombre de una imágen. Por lo tanto tendrán el formato <code>IMAGEN:TAG</code>.
                        <ul> Ejemplos de imágenes y tags:
                            <li><code>ubuntu:latest</code></li>
                            <li><code>python:3.9.19</code></li>
                            <li><code>redis:7.4.0</code></li>
                            <li><code>python:3.9.19-slim-bullseye</code></li>
                        </ul>
                    </p>
                    </small>

                    <p><small>Si no se especifica el tag de la imágen, se descargará el tag "latest", que indica la mas reciente versión disponible.</small>
                    
                    
                    </p>


                </section>

                <section id="images_tags2" data-state="no_footer">
                    <h3>Tags de las imágenes</h3>
                    <p><small>¿Dónde buscar los tags?, en la registry. Por ejemplo en <a href="https://hub.docker.com" target="_blank">Docker Hub</a>

                    </small>
                    <img src="img/clase2/docker_hub2.png">
                </p>
                

                </section>

                <section id="images_tags3" data-state="no_footer">
                    <h3>Tags de las imágenes</h3>

                    <h4>Beneficios de usar tags</h4>
                    <small>
                        <ul>
                            <li><strong>Versionado:</strong> Permiten llevar un control de las versiones de la aplicación.</li>
                            <li><strong>Flexibilidad:</strong> Facilitan el despliegue de versiones específicas en diferentes entornos.</li>
                            <li><strong>Organización:</strong> Ayudan a mantener un repositorio de imágenes bien organizado y comprensible.</li>
                            <li><strong>Conocer imágen base:</strong> Es habitual encontrar en el tag la imágen base de la imágen.
                                Por eso vamos a encontrar tags como: IMAGEN:v1.0-alpine (para referirse que está basada en Alpine Linux) o hagan referencia a la arquitectura, por ejemplo: amd64, arm64v8, etc.
                            </li>
                        </ul>
                    </small>
                    <p>
                        <small>Para ambientes productivos, es <strong>altamente recomendable</strong> especificar la versión de la imágen y NO usar la :latest.</small>
                    </p>

                    <p><small>Ref: <a href="https://docs.docker.com/reference/cli/docker/image/tag/" target="_blank">Docker Docs Tags</a></small></p>
                </section>

                <section id="docker3" data-state="no_footer">
                    <h3>Ejecución de contenedores</h3>
                    <small>
                        
                        <ul>
                            <li>Los contenedores se crean a partir de imágenes.</li>
                            <li>Si al intentar correr un contenedor, la imagen no está descargada, se descargará automáticamente de la registry</li>
                            <li>De una misma imagen, se pueden crear múltiples contenedores que pueden ejecutarse simultáneamente.</li>
                            <li>Por defecto, los contenedores <strong>No son persistentes</strong> y la info guardada dentro de ellos se pierde al finalizar la ejecución.</li>
                            <li>Durante su ciclo de vida, los contenedores pasan por diferentes <strong>estados</strong>.</li>

                        </ul>
                        <br><br>


                         
                        


                        <img src="img/clase2/container.png">
                        

                    
                    
                    </small>
                    <br>

                    



                </section>

                

                <section id="docker_status" data-state="no_footer">
                    <h3>Estados de un contenedor Docker</h3>
           
                    <small>
                    <ul> 
                        <li><strong>Created:</strong> El contenedor se ha creado pero no está en ejecución.</li>
                        <li><strong>Running:</strong> El contenedor está en ejecución, también puede aparecer como Up seguido por el tiempo que hace que está ejecutándose.</li>
                        <li><strong>Restarting:</strong> El contenedor se está reiniciando. Esto puede suceder si el contenedor está configurado para reiniciarse automáticamente en ciertos casos, como después de un fallo o bien por indicación del programador.</li>
                        <li><strong>Removing:</strong> El contenedor está en proceso de ser eliminado.</li>
                        <li><strong>Paused:</strong> El contenedor está pausado; no ejecuta procesos pero sigue accesible.</li>
                        <li><strong>Exited:</strong> El contenedor ha terminado su ejecución con un código de salida. Un código 0 indica que finalizó correctamente.</li>
                        <li><strong>Dead:</strong> El contenedor no puede ser gestionado por Docker debido a un fallo grave.</li>

                        
                    </ul>
                    
                    </small>
                    <p><small><a href="https://docs.docker.com/reference/cli/docker/container/ls/#status" target="_blank">Ref Docker Docs Status</a></small></p>
                </section>







                <section id="life_cycle" data-state="no_footer">
                    <h3>Ciclo de vida de contenedores</h3>
                    <small><p>Este ciclo de vida permite gestionar de forma efectiva la creación, ejecución y eliminación de contenedores.</p></small>
                    <img src="img/clase2/cycle.png">
                    <small class="fragment">Cada etapa del ciclo de vida se asocia a un comando que provocará el cambio de un estado a otro.</small>


                </section>

                <!-- <section id="images_container" data-state="no_footer">
					<h3>Crear un contenedor a partir de una imáge</h3>
                    <small>
                        <a href="clase1.html#/docker-install_18" target="_blank">En la clase anterior</a> ejecutamos el contenedor <em>hello-world</em>. ¿Qué ha pasado cuando lo ejecutamos?:
                        <ul>
                            <li>1. El cliente Docker se conecta con el Docker daemon</li>
                            <li>2. El Docker daemon descarga la imágen (si no se encuentra descargada) "hello-world" desde la registry (DockerHub)</li>
                            <li>3. El Docker daemon crea un nuevo contenedor partiendo desde la imágen descargada y la ejecución de la imágen produce un texto que se muestra en pantalla.</li>
                            <li>4. El contenedor termina su ejecución y finaliza con un estado <em>Exit (0)</em></li>
                        </ul>
                    </small>
				</section> -->



                <!-- PARA LA PRÓXIMA CLASE, MEJOR -->

                <!-- <section id="images_container" data-state="no_footer">

                    <h3>Imágenes y Dockerfile</h3>

                    <small>
                        <p>Un <code>Dockerfile</code> es un archivo de texto que contiene una serie de instrucciones que Docker utiliza para construir una imagen de Docker. Es la receta que define todo lo necesario para configurar y ejecutar una aplicación dentro de un contenedor.</p>
                    </small>
                        <h4>Archivo Dockerfile de ejemplo:</h4>

                        <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                            FROM ubuntu:latest
                            RUN apt-get update && apt-get install -y nginx
                            COPY index.html /var/www/html/
                            CMD ["nginx", "-g", "daemon off;"]
                            EXPOSE 80
                        </code></pre>

                        <small class="fragment"><p>A continuación analizaremos los componentes de un Dockerfile</p></small>

                </section>

                <section id="dockerfile" data-state="no_footer">
                    <h3>Estructura de un Dockerfile</h3>
                    <small>
                        <p></p>
                        <ul>
                            <li><strong><code>FROM</code>:</strong> Las imágenes arrancan siempre con el FROM. Es la base de la imágen. Por lo general indica la imágen de un sistema operativo o de una aplicación. Es una buena práctica usar una imágen ya pre-armada con todas las dependencias y no armarla a partir del SO si no es necesario.</li>
                            <li><strong><code>RUN</code>:</strong> Ejecuta comandos en el contenedor durante la construcción de la imagen del FROM.</li>
                            <li><strong><code>COPY/ADD</code>:</strong> Copia archivos y directorios desde el sistema de archivos del host al sistema de archivos del contenedor.</li>
                            <li><strong><code>CMD/ENTRYPOINT</code>:</strong> Define el comando predeterminado que se ejecutará cuando se inicie un contenedor a partir de la imagen.</li>
                            <li><strong><code>EXPOSE</code>:</strong> Indica el puerto en el que la aplicación dentro del contenedor estará escuchando.</li>

                        </ul>

                        <p>Consultar la <a href="https://docs.docker.com/reference/dockerfile/" target="_blank">referencia <code>Dockerfile</code></a> para ver todos los comandos disponibles.</p>
                    </small>

                </section> -->

                <section id="ipreguntas1" data-state="no_footer">
                    <h2>Consultas</h2>
                </section>




            </section>


            <section>
				<section id="docker_cli" data-state="customevent" data-transition="slide" data-background-gradient="radial-gradient(#ffffff, #dcffdc)" data-background-size="contain">
					<h2>Docker CLI</h2>
                    <h4>Comandos básicos</h4>
				</section>

                <section id="docker_cli1" data-state="no_footer">
                    <h3>Comandos básicos</h3>
                    
                    <small>
                        <p>La Docker CLI es la interfaz de línea de comandos de Docker, donde podemos ejecutar comandos para gestionar contenedores e imágenes. Una vez instalado Docker, podemos utilizar la CLI desde una terminal, como PowerShell o Bash, para interactuar con Docker.</p>
                    </small>

                    <p>Iniciar un contenedor</p>

                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker run [opciones] [imagen] [comando]
                    </code></pre>
                    <p>Ejemplos</p>

                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker run hello-world      # Iniciará el hello-world de Docker
                        docker run -it ubuntu bash  # Iniciará una bash interactiva
                    </code></pre>

                    




    
                </section>

                <!-- <section id="docker4" data-state="no_footer">

                    <h3>Ver estado de contenedores</h3>

                    <p>Se usa el comando <code>docker ps -a</code></p>

                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker ps -a
                    </code></pre>

                    <p>Resultado:</p>

                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        CONTAINER ID  IMAGE    CREATED         STATUS                       
                        1a2b3c4d5e6f  nginx    2 minutes ago   Up 2 minutes
                        7g8h9i0j1k2l  busybox  5 minutes ago   Exited (0) 3 min ago
                        3m4n5o6p7q8r  ubuntu   10 minutes ago  Created

                    </code></pre>

                    <p><small>Mas adelante en el curso profundizaremos en las diferentes interacciones con contenedores.</small></p>

                </section> -->

                <section id="docker_cli2" data-state="no_footer">
                    <h4>Comandos mas utilizados de Docker</h4>


                    <p>Listar contenedores</p>

                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker ps       # Contenedores en ejecución
                        docker ps -a    # Todos los contenedores
                    </code></pre>

                    <small>
                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
docker ps -a

CONTAINER ID   IMAGE        COMMAND     CREATED             STATUS                          NAMES
397b24009eac   ubuntu       "bash"      6 seconds ago       Up 5 seconds                    infallible_jemison
97476377f815   hello-world  "/hello"    About an hour ago   Exited (0) About an hour ago    bold_rosalind
                    </code></pre>
                </small>

                <small class="fragment">Observar que tras la ejecución del comando <strong>docker ps -a</strong> se ven <strong>los estados</strong> de los contenedores. Uno está arriba y el otro Exited (0)</small>

                <p class="fragment"><small >Si no es especificado el <strong>name</strong> al momento de correr el container, se creará un nombre aleatorio.</small></p>
                <p class="fragment"><small>Ref Docker Docs: <a href="https://docs.docker.com/reference/cli/docker/container/ls" target="_blank">conainer ls</a> </small></p>




    
                </section>

                <section id="docker_ps" data-state="no_footer">

                    <h4>Comandos mas utilizados de Docker</h4>
                    <small>
                    <p>El comando docker ps nos brindará la siguiente información relevante.</p></small>

                    <small>
                        <ul>
                            <li><strong>CONTAINER ID</strong>: Es un identificador único (hash) asignado a cada contenedor, utilizado para diferenciarlo de otros contenedores en el sistema.</li>
                            <li><strong>IMAGE</strong>: Muestra el nombre de la imagen desde la cual se ha creado y está corriendo el contenedor.</li>
                            <li><strong>COMMAND</strong>: Indica el comando que se ejecutó dentro del contenedor al iniciarlo.</li>
                            <li><strong>CREATED</strong>: Indica el tiempo transcurrido desde que el contenedor fue creado.</li>
                            <li><strong>STATUS</strong>: Refleja el estado actual del contenedor, como si está en ejecución, detenido, o en otro estado.</li>
                            <li><strong>PORTS</strong>: Lista los puertos que el contenedor está escuchando y aquellos en el host que están redirigidos al contenedor. Este concepto se explicará más a fondo al trabajar con contenedores que interactúan mediante la red.</li>
                            <li><strong>NAMES</strong>: Muestra el nombre asignado al contenedor. Si no se especifica un nombre al crear el contenedor, Docker le asigna uno de forma aleatoria, lo que permite una identificación alternativa además del ID.</li>
                        </ul>
                    </small>

                </section>

                <section id="docker_cli3" data-state="no_footer">
                    <h4>Comandos mas utilizados de Docker</h4>
                    <p>Descargar una imágen</p>
                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker pull IMAGEN:TAG
                    </code></pre>
                    
                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker pull python3:3.9.19-alpine3.20
                    </code></pre>

                    <p>Listar imágenes descargadas</p>
             
                    <pre class="codigo_shadow" data-id="code-animation"><code class="bash codigo-redondo" data-trim>
                        docker images

                        REPOSITORY  TAG                  IMAGE ID       CREATED      SIZE
                        python      3.9.19-alpine3.20    f214f2d92214   3 weeks ago  47.7MB
                        python      3.9.19-bullseye      4a17c44db219   3 weeks ago  905MB
                        python      3.9.19-slim-bullseye b866cddbe1d1   3 weeks ago  123MB
                        nginx       latest               a72860cb95fd   5 weeks ago  188MB
                    </code></pre>
                    <p><small>Observar la diferencia de tamaño de cada imágen Python. Se trata de la misma versión de Python 3.9.19 pero cambia la imágen base.</small></p>
     

                </section>

                <section id="intro-vm2" data-state="no_footer">
                    <h3>Mas comandos</h3>
                <small>
                    <table><thead>
                        <tr>
                          <th>Comando</th>
                          <th>Descripción</th>
                          <th>Uso</th>
                        </tr></thead>
                      <tbody>
                        <tr>
                          <td><code>docker stop</code></td>
                          <td>Detiene uno o varios contenedores</td>
                          <td><code>docker stop CONTAINERS</code> (name o ID)</td>
                        </tr>
                        <tr>
                          <td><code>docker restart</code></td>
                          <td>Reinicia uno o mas contenedores</td>
                          <td><code>docker stop CONTAINER</code></td>
                        </tr>
                        <tr>
                          <td><code>docker rename</code></td>
                          <td>Renombra un contenedor</td>
                          <td><code>docker rename CONTAINER NEW_NAME</code></td>
                        </tr>
                        <tr>
                          <td><code>docker rm</code></td>
                          <td>Elimina uno o mas contenedores</td>
                          <td><code>docker rm [options] CONTAINER</code></td>
                        </tr>
                      </tbody>
                      </table>
                    
                    
                    </small>
                    <p><small>Consulte la <a href="https://docs.docker.com/reference/cli/docker/" target="_blank">Docker CLI Refence</a> para un listado completo.</small></p>

                </section>

                <section id="ipreguntas1" data-state="no_footer">
                    <h2>Consultas</h2>
                </section>

            </section>
           

            <section id="labs_clase" data-state="no_footer">
                <h3>Actividad de práctica:</h3>
                <small>
                <ul>

                    <li><a href="https://github.com/kity-linuxero/docker_410_practicas/blob/main/labs/02-conceptos-basicos/21-images-registry-container.md" target="_blank">Lab 2.1</a> Imágenes, registry y contenedores</li>
                    <li><a href="https://github.com/kity-linuxero/docker_410_practicas/blob/main/labs/02-conceptos-basicos/22-images-tags.md" target="_blank">Lab 2.2</a> Gestión de imágenes y versiones en Docker</li>
                    <li><a href="https://github.com/kity-linuxero/docker_410_practicas/blob/main/labs/02-conceptos-basicos/23-images-push.md" target="_blank">Lab 2.3</a> Guardando imágenes en DockerHub</li>
                    

                    
                </ul>

                </small>
                
            
                

            </section>

        </section>

        <section id="fin" data-state="hide_footer" data-transition="slide" data-background-gradient="radial-gradient(#ffffff, #dcffdc)" data-background-size="contain">
				
            <img src="img/logos/idep_logo.png" width="40%" height="40%">
            

        </section>
						

					
    </div>
</div>

<footer>
    <!-- Logos en el footer -->
    <div id="logos-footer" class="footer">
        <span class="element"><img src="img/logos/cfl_logo.png" class="foot-image"></span>
        <span class="element"><img src="img/logos/IDEPInformaticaLogo.png" class="foot-image-idep-info"></span>
        <span class="element"><img src="img/logos/ate_logo.svg" class="foot-image"></span>
    </div>

    <script type="text/javascript">
        window.addEventListener("load", function() {
    
            revealDiv = document.querySelector("body div.reveal")
            footer = document.getElementById("logos-footer");
            revealDiv.appendChild(footer);
    
        } );
    </script>
</footer>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/zoom/zoom.js"></script>
<script src="plugin/copycode/copycode.js"></script>


<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/

        // Para eventos personalizados. Indica que está en la presentación

    Reveal.on( 'customevent', function() {
        var element = document.getElementById("logos-footer");
        element.style.display = "table";
        element.style.opacity = "40%";

    } );

    Reveal.on( 'hide_footer', function() {
        var element = document.getElementById("logos-footer");
        element.style.display = "table";
        element.style.opacity = "0%";

    } );

    Reveal.on( 'no_footer', function() {
        var element = document.getElementById("logos-footer");
        //element.style.display = "none";
        // element.style.display = "table";
        element.style.opacity = "15%";
    } );
    Reveal.initialize({
        hash: true,

        copycode: {
        button: "hover",
        display: "icons",
        text: {
            copy: "Copiar",
            copied: "¡Copiado!",
        },
        plaintextonly: true,
        timeout: 1000,
        style: {
            copybg: "gray",
            copiedbg: "green",
            copycolor: "black",
            copiedcolor: "white",
            copyborder: "",
            copiedborder: "",
            scale: 1,
            offset: 0,
            radius: 0.2
        },
        tooltip: true,
        iconsvg: {
            copy: '',
            copied: ''
        },
        cssautoload: true,
        csspath: "",
        clipboardjspath: ""
        },

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom, CopyCode ]
    });
</script>

</body>
</html>